*** creating affective polarization scales using thermometers
***
*** pid3 | 3-point party ID
***   1=Dem, 2=Rep, 3=Ind, 4=Other, 5=Not Sure
*** pid7 | 7-point party ID
***   1-7=Strong Dem to Strong Rep, 4=Independent, 8=Not Sure
*** Q44 | rate Dems thermometer
*** Q45 | rate Reps thermometer

tab1 Q44 Q45

generate demfeelth = .
replace demfeelth = Q44
replace demfeelth = . if (Q44 == 999)
tab demfeelth

generate demfeelth_scale=demfeelth/100
tab demfeelth_scale

generate repfeelth = .
replace repfeelth = Q45
replace demfeelth = . if (Q45 == 999)
tab repfeelth

generate repfeelth_scale=repfeelth/100
tab repfeelth_scale


*** subtracting thermometers

generate AP_th = demfeelth_scale - repfeelth_scale
tab AP_th
histogram AP_th

*** BUT WAIT we only need out-group Affective polarization
tab pid3

*** pid3==1 gives us how Dems rate Reps
generate dem_AP_repth
replace dem_AP_repth = repfeelth_scale if (pid3 == 1)

tab dem_AP_repth
histogram dem_AP_repth

*** pid3==2 gives us how Reps rate Dems
generate rep_AP_demth
replace rep_AP_demth = demfeelth_scale if (pid3 == 2)

tab rep_AP_demth
histogram rep_AP_demth

***
*** MAKE SURE TO RUN the API SCALE DO FILE 
*** 

alpha unpatriotic_scale openminded_scale smart_scale dem_AP_repth, std item detail


